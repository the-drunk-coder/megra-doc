# Sequence Generators & Contexts

Now we need to put things into context. Everything in Mégra runs inside a context where different sequences (or sequence generators) are synchronized. 
That's why it's a "Sync-conteXt", or "sx" for short. "Synchronization" here refers to to the generators being started at the same time. 
If they run at different speeds (more on that later), they won't stay synchronized.

A sync context needs a **name** and a **flag** that tells it whether it should be running or not. 

Everything that follows are **sequence generators**. A **sequence generator** generates a sequence of sound (or control) events, hence the name.

```lisp
;; This is a comment ... everything behind ;; will be ignored.

;; This is a sync context. It catches the sound events generated by the sequence generators.
;; Names in Mégra start with a ' , so the name here is just 'context. This is inherited from 
;; Lisp family of programming languages.
;; The flag (boolean) is either #t (true) or #f (false) and determines whether the context 
;; active or not.

(sx 'context #t ;; <-- sx <name> <flag>
  (cyc 'cycle-generator "bd ~ hats ~ sn ~ hats ~")) ;; <-- this generates a sequence of event
```

You can put multiple sequence generators in the same context, so that they all run in sync:
Per defualt, new generators (that were not present in the context before) are **syncronized**
on a **non-silent event**.

```lisp
(sx 'context #t ;; <-- set this to #f to mute this context !
  (cyc 'percussion-generator "~ ~ ~ risset:'a5 ~ ~ risset:'c6 ~")
  (cyc 'bassline-generator "saw:'a1 ~ saw:'ds2 saw:'e2 ~ ~ saw:'c3 ~")
  (cyc 'beat-generator "bd ~ hats ~ sn ~ hats ~")) 
```

You can also synchronize multiple contexts:

```lisp
(sx 'context-a #t ;; <-- execute this first
  (cyc 'percussion-generator "~ ~ ~ risset:'a5 ~ ~ risset:'c6 ~")
  (cyc 'beat-generator "bd ~ hats ~ sn ~ hats ~"))

(sx 'context-b #t :sync 'context-a ;; <-- execute this when you deem fit 
  (cyc 'bassline-generator "saw:'a1 ~ saw:'ds2 saw:'e2 ~ ~ saw:'c3 ~"))

(clear) ;; clear stops everything
```

There's more cool stuff you can do with the sync context alone, such as 
**soloing** and **blocking**:

```lisp
(sx 'context #t :solo 'beat-generator ;; <-- You can solo single generators ...
  (cyc 'percussion-generator "~ ~ ~ risset:'a5 ~ ~ risset:'c6 ~")
  (cyc 'bassline-generator "saw:'a1 ~ saw:'ds2 saw:'e2 ~ ~ saw:'c3 ~")
  (cyc 'beat-generator "bd ~ hats ~ sn ~ hats ~"))

(sx 'context #t :block 'beat-generator ;; <-- ... or block them!
  (cyc 'percussion-generator "~ ~ ~ risset:'a5 ~ ~ risset:'c6 ~")
  (cyc 'bassline-generator "saw:'a1 ~ saw:'ds2 saw:'e2 ~ ~ saw:'c3 ~")
  (cyc 'beat-generator "bd ~ hats ~ sn ~ hats ~"))

(sx 'context #t :block 'sn ;; <-- You can also block or solo a special event types.
  (cyc 'percussion-generator "~ ~ ~ risset:'a5 ~ ~ risset:'c6 ~")
  (cyc 'bassline-generator "saw:'a1 ~ saw:'ds2 saw:'e2 ~ ~ saw:'c3 ~")
  (cyc 'beat-generator "bd ~ hats ~ sn ~ hats ~"))

(sx 'context #t :solo 'sn 'risset ;; <-- You can also block or solo multiple tags.
  (cyc 'percussion-generator "~ ~ ~ risset:'a5 ~ ~ risset:'c6 ~")
  (cyc 'bassline-generator "saw:'a1 ~ saw:'ds2 saw:'e2 ~ ~ saw:'c3 ~")
  (cyc 'beat-generator "bd ~ hats ~ sn ~ hats ~"))

(clear)
```

**TECH BACKGROUND:**

You can also think of the sync context as a sink for sound events. Every sound event
that is emitted by the generator has a bunch of tags, which contain the name of the 
generator, the event type, and, in case of sample events, the search tags (more about that later). 
The block and solo keywords activate filters that act on these tags.
